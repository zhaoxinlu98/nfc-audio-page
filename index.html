<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>极速小鱼 - 音频播放器</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap');

  body {
    font-family: 'Source Sans Pro', sans-serif;
    background: linear-gradient(135deg, #D7EEF6 0%, #B7DFF8 100%);
    margin: 0;
    padding: 0;
    color: #333;
  }
  header {
    background-color: #18B7F6;
    color: white;
    padding: 20px;
    text-align: center;
    font-size: 28px;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 3px 6px rgba(24,183,246,0.6);
  }
  header::before {
    content: "🐟 ";
  }
  #player {
    background: #fff;
    padding: 12px 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    position: sticky;
    top: 72px;
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-radius: 12px;
    margin: 8px 12px;
    user-select: none;
  }
  #tabs {
    display: flex;
    justify-content: center;
    gap: 18px;
    margin: 0 12px 24px 12px;
    padding: 12px;
    background: rgba(215, 238, 246, 0.6);
    border-radius: 16px;
    box-shadow: 0 6px 14px rgba(102, 107, 206, 0.15);
    user-select: none;
    overflow-x: auto;
    scrollbar-width: none; /* Firefox */
  }
  #tabs::-webkit-scrollbar {
    display: none; /* Chrome, Safari */
  }
  .tab {
    background: white;
    border-radius: 14px;
    padding: 14px 30px;
    font-size: 18px;
    font-weight: 600;
    color: #666BCE;
    border: 2px solid transparent;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(102, 107, 206, 0.1);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    outline-offset: 3px;
    flex: 0 0 auto;
  }
  .tab:hover:not(.active) {
    background: #e1ecff;
    box-shadow: 0 6px 14px rgba(24, 183, 246, 0.3);
    color: #18B7F6;
    border-color: #18B7F6;
    transform: translateY(-3px);
  }
  .tab.active {
    background: #666BCE;
    color: white;
    box-shadow: 0 6px 20px rgba(102, 107, 206, 0.6);
    border-color: #666BCE;
    transform: translateY(-3px);
  }
  /* 动画淡入 */
  .audio-list {
    display: none;
    padding: 20px 16px;
    max-height: 320px;
    overflow-y: auto;
    background: #ffffffcc;
    border-radius: 0 0 12px 12px;
    box-shadow: 0 0 15px rgba(102,107,206,0.12);
    margin: 0 12px 40px 12px;
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  .audio-list.active {
    display: block;
    opacity: 1;
  }
  .audio-item {
    margin: 10px 0;
    background-color: #D7EEF6;
    padding: 14px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 16px;
    color: #2c3e50;
    transition: background-color 0.3s, box-shadow 0.3s, transform 0.15s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.05);
  }
  .audio-item:hover:not(.active) {
    background-color: #B0DFFC;
    box-shadow: 0 6px 12px rgba(24,183,246,0.35);
    transform: translateY(-2px);
  }
  .audio-item.active {
    background-color: #666BCE;
    color: white;
    box-shadow: 0 0 18px #5559b8;
    animation: pulseGlow 2s infinite alternate ease-in-out;
  }
  @keyframes pulseGlow {
    0% {
      box-shadow: 0 0 8px #666BCE;
    }
    100% {
      box-shadow: 0 0 18px #666BCE;
    }
  }
  .controls button {
    margin: 0 12px;
    padding: 12px;
    font-size: 24px;
    cursor: pointer;
    transition: transform 0.15s ease-in-out, background-color 0.3s;
    border: none;
    background: none;
    color: #18B7F6;
    border-radius: 12px;
    user-select: none;
    display: flex;
    align-items: center;
  }
  .controls button:hover {
    color: #137abf;
    transform: scale(1.12);
  }
  .controls button:active {
    transform: scale(0.95);
  }
  .progress-container {
    flex: 1;
    margin: 0 20px;
    display: flex;
    flex-direction: column;
  }
  #nowPlaying {
    font-weight: 700;
    margin-bottom: 8px;
    font-size: 18px;
    color: #333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  #progress {
    width: 100%;
    -webkit-appearance: none;
    appearance: none;
    height: 12px;
    border-radius: 6px;
    background: #d0d0d0;
    outline: none;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #progress::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #666BCE;
    cursor: pointer;
    box-shadow: 0 0 8px #666BCE;
    transition: background-color 0.3s;
  }
  #progress::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #666BCE;
    cursor: pointer;
    box-shadow: 0 0 8px #666BCE;
  }
  #progress:hover {
    background-color: #b0c8f9;
  }
  #progress:active::-webkit-slider-thumb {
    background-color: #5559b8;
  }
  #time {
    font-size: 13px;
    color: #666;
    margin-top: 6px;
    text-align: right;
    user-select: none;
  }

  /* 响应式 - 手机屏幕调整 */
  @media (max-width: 600px) {
    #player {
      flex-direction: column;
      gap: 14px;
      top: 56px;
      margin: 8px 8px;
    }
    #tabs {
      flex-direction: row;
      gap: 12px;
      padding: 16px 8px;
      margin: 0 8px 20px 8px;
    }
    .tab {
      justify-content: center;
      padding: 16px 24px;
      font-size: 18px;
      flex: 0 0 auto;
      width: auto;
    }
    .audio-list {
      max-height: 260px;
      margin: 0 8px 30px 8px;
      padding: 15px;
    }
    .audio-item {
      font-size: 14px;
      padding: 12px 16px;
    }
    .controls button {
      font-size: 28px;
      padding: 16px;
      margin: 0 10px;
    }
    #nowPlaying {
      font-size: 16px;
    }
  }
</style>
</head>
<body>
<header>极速小鱼</header>
<div id="player" class="controls" role="region" aria-label="音频播放器控制区">
  <button id="prev" aria-label="上一首" aria-pressed="false" style="background:none; border:none; cursor:pointer;">
    <!-- 放大且更明显的向左游动小鱼 -->
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 64 64" fill="none" stroke="#18B7F6" stroke-width="3" stroke-linejoin="round" stroke-linecap="round">
      <path d="M45 20c-8 0-20 8-20 20 0 10 12 20 20 20 6 0 10-12 10-20 0-12-4-20-10-20z" fill="#18B7F6"/>
      <circle cx="24" cy="32" r="10" fill="#D7EEF6"/>
      <circle cx="24" cy="32" r="6" fill="#18B7F6"/>
      <path d="M40 32l8-8" stroke="#fff" stroke-width="2"/>
      <path d="M40 32l8 8" stroke="#fff" stroke-width="2"/>
    </svg>
  </button>

  <button id="playPause" aria-label="播放/暂停" style="background:none; border:none; cursor:pointer; color:#18B7F6; font-size: 28px; user-select:none;">
    ▶️
  </button>

  <div class="progress-container">
    <div id="nowPlaying" aria-live="polite" aria-atomic="true" aria-owns="progress">未播放</div>
    <input type="range" id="progress" value="0" aria-label="播放进度" />
    <div id="time" aria-live="polite" aria-atomic="true">00:00 / 00:00</div>
  </div>

  <button id="next" aria-label="下一首" aria-pressed="false" style="background:none; border:none; cursor:pointer;">
    <!-- 放大且更明显的向右游动小鱼 -->
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 64 64" fill="none" stroke="#18B7F6" stroke-width="3" stroke-linejoin="round" stroke-linecap="round">
      <path d="M19 20c8 0 20 8 20 20 0 10-12 20-20 20-6 0-10-12-10-20 0-12 4-20 10-20z" fill="#18B7F6"/>
      <circle cx="40" cy="32" r="10" fill="#D7EEF6"/>
      <circle cx="40" cy="32" r="6" fill="#18B7F6"/>
      <path d="M24 32l-8-8" stroke="#fff" stroke-width="2"/>
      <path d="M24 32l-8 8" stroke="#fff" stroke-width="2"/>
    </svg>
  </button>

  <button id="random" aria-label="随机播放" style="background:none; border:none; cursor:pointer; font-size: 24px; color:#18B7F6;">
    🔀
  </button>
</div>

<div id="tabs" role="tablist" aria-label="音频模块切换" class="tab-container">
  <button class="tab active" data-tab="gululu" role="tab" aria-selected="true" tabindex="0" aria-controls="gululu">
    🐟 小鱼咕噜
  </button>
  <button class="tab" data-tab="sing" role="tab" aria-selected="false" tabindex="-1" aria-controls="sing">
    🎤 小鱼唱歌
  </button>
  <button class="tab" data-tab="story" role="tab" aria-selected="false" tabindex="-1" aria-controls="story">
    📖 小鱼讲故事
  </button>
</div>

<div id="gululu" class="audio-list active" role="tabpanel" tabindex="0" aria-labelledby="gululu" >
  <div class="audio-item" data-src="buyaohaipaikunnan.mp3" tabindex="0">不要害怕困难</div>
  <div class="audio-item" data-src="dongrizhufu.mp3" tabindex="0">冬日祝福</div>
  <div class="audio-item" data-src="ge-ye-xihuan-ni.mp3" tabindex="0">哥也喜欢你</div>
  <div class="audio-item" data-src="cuini_rushui.mp3" tabindex="0">催你入睡</div>
  <div class="audio-item" data-src="jiedianhua.mp3" tabindex="0">接电话</div>
  <div class="audio-item" data-src="jiejie.mp3" tabindex="0">姐姐</div>
  <div class="audio-item" data-src="meimei-wanan .mp3" tabindex="0">妹妹晚安</div>
  <div class="audio-item" data-src="taiyangshai_pigu.mp3" tabindex="0">太阳晒屁股</div>
  <div class="audio-item" data-src="qichuang_naoling_shengri.mp3" tabindex="0">起床闹铃（生日版）</div>
  <div class="audio-item" data-src="sajiaobalian.mp3" tabindex="0">撒娇八连</div>
  <div class="audio-item" data-src="shengri_duxin.mp3" tabindex="0">生日读信</div>
  <div class="audio-item" data-src="women_haohui_zai_jian_men.mp3" tabindex="0">我们还会再见面的</div>
  <div class="audio-item" data-src="jiejie_zaodian_shuijiao_ba.mp3" tabindex="0">姐姐早点睡觉吧</div>
  <div class="audio-item" data-src="xin_de_yinian_xiwang.mp3" tabindex="0">新的一年希望明年要比今年更开心一点</div>
  <div class="audio-item" data-src="zaijianchi_yixia_rensheng_gaoguang.mp3" tabindex="0">再坚持一下我的人生高光就来了</div>
  <div class="audio-item" data-src="mama_wanan.mp3" tabindex="0">妈妈晚安</div>
</div>

<div id="sing" class="audio-list" role="tabpanel" tabindex="0" aria-labelledby="sing">
  <div class="audio-item" data-src="siyishenghua_live.mp3" tabindex="0">肆意生花片段（直播版）</div>
  <div class="audio-item" data-src="tebie_de_ren.mp3" tabindex="0">特别的人</div>
  <div class="audio-item" data-src="tuheisu.mp3" tabindex="0">褪黑素</div>
</div>

<div id="story" class="audio-list" role="tabpanel" tabindex="0" aria-labelledby="story">
  <div class="audio-item" data-src="xiaoshuimian.mp3" tabindex="0">小睡眠</div>
  <div class="audio-item" data-src="xiaoyu_youdao_dahaili_le_ma.mp3" tabindex="0">小鱼游到大海里了吗</div>
</div>

<script>
  const tabs = document.querySelectorAll(".tab");
  const audioLists = document.querySelectorAll(".audio-list");
  const audio = new Audio();
  const nowPlaying = document.getElementById("nowPlaying");
  const playPauseBtn = document.getElementById("playPause");
  const prevBtn = document.getElementById("prev");
  const nextBtn = document.getElementById("next");
  const randomBtn = document.getElementById("random");
  const progress = document.getElementById("progress");
  const timeDisplay = document.getElementById("time");

  let currentIndex = -1;

  // 切换模块Tab
  tabs.forEach((tab) => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => {
        t.classList.remove("active");
        t.setAttribute("aria-selected", "false");
        t.tabIndex = -1;
      });
      tab.classList.add("active");
      tab.setAttribute("aria-selected", "true");
      tab.tabIndex = 0;

      audioLists.forEach(list => {
        list.classList.remove("active");
        list.hidden = true;
      });
      const target = document.getElementById(tab.dataset.tab);
      target.classList.add("active");
      target.hidden = false;

      currentIndex = -1;
      audio.pause();
      audio.src = "";
      nowPlaying.textContent = "未播放";
      progress.value = 0;
      timeDisplay.textContent = "00:00 / 00:00";

      clearActiveItems();
    });

    tab.addEventListener("keydown", (e) => {
      if (e.key === "ArrowRight") {
        e.preventDefault();
        const next = e.target.nextElementSibling || tabs[0];
        next.focus();
      } else if (e.key === "ArrowLeft") {
        e.preventDefault();
        const prev = e.target.previousElementSibling || tabs[tabs.length - 1];
        prev.focus();
      }
    });
  });

  // 清除选中高亮
  function clearActiveItems() {
    document.querySelectorAll(".audio-item.active").forEach(item => {
      item.classList.remove("active");
    });
  }

  // 当前模块音频列表
  function getCurrentListItems() {
    return document.querySelectorAll(".audio-list.active .audio-item");
  }

  // 播放指定索引的音频
  function playAudio(index) {
    const items = getCurrentListItems();
    if (items.length === 0) return;
    if (index < 0) index = items.length - 1;
    if (index >= items.length) index = 0;
    currentIndex = index;
    const item = items[currentIndex];
    const src = item.dataset.src.trim();
    audio.src = src;
    audio.play();
    clearActiveItems();
    item.classList.add("active");
    nowPlaying.textContent = item.textContent;
    playPauseBtn.textContent = "⏸️";
    playPauseBtn.setAttribute("aria-label", "暂停");
  }

  // 点击音频项播放
  function bindAudioItems() {
    getCurrentListItems().forEach((item, i) => {
      item.addEventListener("click", () => playAudio(i));
      item.addEventListener("keydown", e => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          e.target.click();
        }
      });
    });
  }

  // 播放/暂停按钮
  playPauseBtn.addEventListener("click", () => {
    if (audio.paused) {
      audio.play();
      playPauseBtn.textContent = "⏸️";
      playPauseBtn.setAttribute("aria-label", "暂停");
    } else {
      audio.pause();
      playPauseBtn.textContent = "▶️";
      playPauseBtn.setAttribute("aria-label", "播放");
    }
  });

  // 上一首
  prevBtn.addEventListener("click", () => {
    playAudio(currentIndex - 1);
  });

  // 下一首
  nextBtn.addEventListener("click", () => {
    playAudio(currentIndex + 1);
  });

  // 随机播放
  randomBtn.addEventListener("click", () => {
    const items = getCurrentListItems();
    if (items.length === 0) return;
    const randomIndex = Math.floor(Math.random() * items.length);
    playAudio(randomIndex);
  });

  // 音频进度更新
  audio.addEventListener("timeupdate", () => {
    if (audio.duration) {
      const percent = (audio.currentTime / audio.duration) * 100;
      progress.value = percent;
      timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
    }
  });

  // 进度条拖动控制音频进度
  progress.addEventListener("input", () => {
    if (audio.duration) {
      const seekTime = (progress.value / 100) * audio.duration;
      audio.currentTime = seekTime;
    }
  });

  // 音频播放完自动下一首
  audio.addEventListener("ended", () => {
    playAudio(currentIndex + 1);
  });

  // 格式化时间为 mm:ss
  function formatTime(seconds) {
    const m = Math.floor(seconds / 60).toString().padStart(2, "0");
    const s = Math.floor(seconds % 60).toString().padStart(2, "0");
    return `${m}:${s}`;
  }

  // 初始化绑定事件
  bindAudioItems();

  // 触摸滑动切换Tab支持
  let startX = 0;
  let endX = 0;
  const tabContainer = document.getElementById('tabs');

  tabContainer.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
  });
  tabContainer.addEventListener('touchmove', e => {
    endX = e.touches[0].clientX;
  });
  tabContainer.addEventListener('touchend', e => {
    const diff = endX - startX;
    if (Math.abs(diff) > 50) {
      let activeIndex = [...tabs].findIndex(t => t.classList.contains('active'));
      if (diff > 0) {
        activeIndex = (activeIndex - 1 + tabs.length) % tabs.length;
      } else {
        activeIndex = (activeIndex + 1) % tabs.length;
      }
      tabs[activeIndex].click();
      tabs[activeIndex].focus();
      bindAudioItems(); // 更新新tab音频事件绑定
    }
  });

  // 每次切换tab时，重新绑定音频点击事件
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      bindAudioItems();
    });
  });

</script>
</body>
</html>
