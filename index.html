<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>æé€Ÿå°é±¼ - éŸ³é¢‘æ’­æ”¾å™¨</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap');

  body {
    font-family: 'Source Sans Pro', sans-serif;
    background: linear-gradient(135deg, #D7EEF6 0%, #B7DFF8 100%);
    margin: 0;
    padding: 0;
    color: #333;
  }
  header {
    background-color: #18B7F6;
    color: white;
    padding: 20px;
    text-align: center;
    font-size: 28px;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 3px 6px rgba(24,183,246,0.6);
  }
  header::before {
    content: "ğŸŸ ";
  }
  #player {
    background: #fff;
    padding: 12px 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    position: sticky;
    top: 72px;
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-radius: 12px;
    margin: 8px 12px;
    user-select: none;
  }
  #tabs {
    display: flex;
    justify-content: center;
    gap: 18px;
    margin: 0 12px 24px 12px;
    padding: 12px;
    background: rgba(215, 238, 246, 0.6);
    border-radius: 16px;
    box-shadow: 0 6px 14px rgba(102, 107, 206, 0.15);
    user-select: none;
    overflow-x: auto;
    scrollbar-width: none; /* Firefox */
  }
  #tabs::-webkit-scrollbar {
    display: none; /* Chrome, Safari */
  }
  .tab {
    background: white;
    border-radius: 14px;
    padding: 14px 30px;
    font-size: 18px;
    font-weight: 600;
    color: #666BCE;
    border: 2px solid transparent;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(102, 107, 206, 0.1);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    outline-offset: 3px;
    flex: 0 0 auto;
  }
  .tab:hover:not(.active) {
    background: #e1ecff;
    box-shadow: 0 6px 14px rgba(24, 183, 246, 0.3);
    color: #18B7F6;
    border-color: #18B7F6;
    transform: translateY(-3px);
  }
  .tab.active {
    background: #666BCE;
    color: white;
    box-shadow: 0 6px 20px rgba(102, 107, 206, 0.6);
    border-color: #666BCE;
    transform: translateY(-3px);
  }
  /* åŠ¨ç”»æ·¡å…¥ */
  .audio-list {
    display: none;
    padding: 20px 16px;
    max-height: 320px;
    overflow-y: auto;
    background: #ffffffcc;
    border-radius: 0 0 12px 12px;
    box-shadow: 0 0 15px rgba(102,107,206,0.12);
    margin: 0 12px 40px 12px;
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  .audio-list.active {
    display: block;
    opacity: 1;
  }
  .audio-item {
    margin: 10px 0;
    background-color: #D7EEF6;
    padding: 14px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    font-size: 16px;
    color: #2c3e50;
    transition: background-color 0.3s, box-shadow 0.3s, transform 0.15s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.05);
  }
  .audio-item:hover:not(.active) {
    background-color: #B0DFFC;
    box-shadow: 0 6px 12px rgba(24,183,246,0.35);
    transform: translateY(-2px);
  }
  .audio-item.active {
    background-color: #666BCE;
    color: white;
    box-shadow: 0 0 18px #5559b8;
    animation: pulseGlow 2s infinite alternate ease-in-out;
  }
  @keyframes pulseGlow {
    0% {
      box-shadow: 0 0 8px #666BCE;
    }
    100% {
      box-shadow: 0 0 18px #666BCE;
    }
  }
  .controls button {
    margin: 0 12px;
    padding: 12px;
    font-size: 24px;
    cursor: pointer;
    transition: transform 0.15s ease-in-out, background-color 0.3s;
    border: none;
    background: none;
    color: #18B7F6;
    border-radius: 12px;
    user-select: none;
    display: flex;
    align-items: center;
  }
  .controls button:hover {
    color: #137abf;
    transform: scale(1.12);
  }
  .controls button:active {
    transform: scale(0.95);
  }
  .progress-container {
    flex: 1;
    margin: 0 20px;
    display: flex;
    flex-direction: column;
  }
  #nowPlaying {
    font-weight: 700;
    margin-bottom: 8px;
    font-size: 18px;
    color: #333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  #progress {
    width: 100%;
    -webkit-appearance: none;
    appearance: none;
    height: 12px;
    border-radius: 6px;
    background: #d0d0d0;
    outline: none;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  #progress::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #666BCE;
    cursor: pointer;
    box-shadow: 0 0 8px #666BCE;
    transition: background-color 0.3s;
  }
  #progress::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #666BCE;
    cursor: pointer;
    box-shadow: 0 0 8px #666BCE;
  }
  #progress:hover {
    background-color: #b0c8f9;
  }
  #progress:active::-webkit-slider-thumb {
    background-color: #5559b8;
  }
  #time {
    font-size: 13px;
    color: #666;
    margin-top: 6px;
    text-align: right;
    user-select: none;
  }

  /* å“åº”å¼ - æ‰‹æœºå±å¹•è°ƒæ•´ */
  @media (max-width: 600px) {
    #player {
      flex-direction: column;
      gap: 14px;
      top: 56px;
      margin: 8px 8px;
    }
    #tabs {
      flex-direction: row;
      gap: 12px;
      padding: 16px 8px;
      margin: 0 8px 20px 8px;
    }
    .tab {
      justify-content: center;
      padding: 16px 24px;
      font-size: 18px;
      flex: 0 0 auto;
      width: auto;
    }
    .audio-list {
      max-height: 260px;
      margin: 0 8px 30px 8px;
      padding: 15px;
    }
    .audio-item {
      font-size: 14px;
      padding: 12px 16px;
    }
    .controls button {
      font-size: 28px;
      padding: 16px;
      margin: 0 10px;
    }
    #nowPlaying {
      font-size: 16px;
    }
  }
</style>
</head>
<body>
<header>æé€Ÿå°é±¼</header>
<div id="player" class="controls" role="region" aria-label="éŸ³é¢‘æ’­æ”¾å™¨æ§åˆ¶åŒº">
  <button id="prev" aria-label="ä¸Šä¸€é¦–" aria-pressed="false" style="background:none; border:none; cursor:pointer;">
    <!-- æ”¾å¤§ä¸”æ›´æ˜æ˜¾çš„å‘å·¦æ¸¸åŠ¨å°é±¼ -->
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 64 64" fill="none" stroke="#18B7F6" stroke-width="3" stroke-linejoin="round" stroke-linecap="round">
      <path d="M45 20c-8 0-20 8-20 20 0 10 12 20 20 20 6 0 10-12 10-20 0-12-4-20-10-20z" fill="#18B7F6"/>
      <circle cx="24" cy="32" r="10" fill="#D7EEF6"/>
      <circle cx="24" cy="32" r="6" fill="#18B7F6"/>
      <path d="M40 32l8-8" stroke="#fff" stroke-width="2"/>
      <path d="M40 32l8 8" stroke="#fff" stroke-width="2"/>
    </svg>
  </button>

  <button id="playPause" aria-label="æ’­æ”¾/æš‚åœ" style="background:none; border:none; cursor:pointer; color:#18B7F6; font-size: 28px; user-select:none;">
    â–¶ï¸
  </button>

  <div class="progress-container">
    <div id="nowPlaying" aria-live="polite" aria-atomic="true" aria-owns="progress">æœªæ’­æ”¾</div>
    <input type="range" id="progress" value="0" aria-label="æ’­æ”¾è¿›åº¦" />
    <div id="time" aria-live="polite" aria-atomic="true">00:00 / 00:00</div>
  </div>

  <button id="next" aria-label="ä¸‹ä¸€é¦–" aria-pressed="false" style="background:none; border:none; cursor:pointer;">
    <!-- æ”¾å¤§ä¸”æ›´æ˜æ˜¾çš„å‘å³æ¸¸åŠ¨å°é±¼ -->
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 64 64" fill="none" stroke="#18B7F6" stroke-width="3" stroke-linejoin="round" stroke-linecap="round">
      <path d="M19 20c8 0 20 8 20 20 0 10-12 20-20 20-6 0-10-12-10-20 0-12 4-20 10-20z" fill="#18B7F6"/>
      <circle cx="40" cy="32" r="10" fill="#D7EEF6"/>
      <circle cx="40" cy="32" r="6" fill="#18B7F6"/>
      <path d="M24 32l-8-8" stroke="#fff" stroke-width="2"/>
      <path d="M24 32l-8 8" stroke="#fff" stroke-width="2"/>
    </svg>
  </button>

  <button id="random" aria-label="éšæœºæ’­æ”¾" style="background:none; border:none; cursor:pointer; font-size: 24px; color:#18B7F6;">
    ğŸ”€
  </button>
</div>

<div id="tabs" role="tablist" aria-label="éŸ³é¢‘æ¨¡å—åˆ‡æ¢" class="tab-container">
  <button class="tab active" data-tab="gululu" role="tab" aria-selected="true" tabindex="0" aria-controls="gululu">
    ğŸŸ å°é±¼å’•å™œ
  </button>
  <button class="tab" data-tab="sing" role="tab" aria-selected="false" tabindex="-1" aria-controls="sing">
    ğŸ¤ å°é±¼å”±æ­Œ
  </button>
  <button class="tab" data-tab="story" role="tab" aria-selected="false" tabindex="-1" aria-controls="story">
    ğŸ“– å°é±¼è®²æ•…äº‹
  </button>
</div>

<div id="gululu" class="audio-list active" role="tabpanel" tabindex="0" aria-labelledby="gululu" >
  <div class="audio-item" data-src="buyaohaipaikunnan.mp3" tabindex="0">ä¸è¦å®³æ€•å›°éš¾</div>
  <div class="audio-item" data-src="dongrizhufu.mp3" tabindex="0">å†¬æ—¥ç¥ç¦</div>
  <div class="audio-item" data-src="ge-ye-xihuan-ni.mp3" tabindex="0">å“¥ä¹Ÿå–œæ¬¢ä½ </div>
  <div class="audio-item" data-src="cuini_rushui.mp3" tabindex="0">å‚¬ä½ å…¥ç¡</div>
  <div class="audio-item" data-src="jiedianhua.mp3" tabindex="0">æ¥ç”µè¯</div>
  <div class="audio-item" data-src="jiejie.mp3" tabindex="0">å§å§</div>
  <div class="audio-item" data-src="meimei-wanan .mp3" tabindex="0">å¦¹å¦¹æ™šå®‰</div>
  <div class="audio-item" data-src="taiyangshai_pigu.mp3" tabindex="0">å¤ªé˜³æ™’å±è‚¡</div>
  <div class="audio-item" data-src="qichuang_naoling_shengri.mp3" tabindex="0">èµ·åºŠé—¹é“ƒï¼ˆç”Ÿæ—¥ç‰ˆï¼‰</div>
  <div class="audio-item" data-src="sajiaobalian.mp3" tabindex="0">æ’’å¨‡å…«è¿</div>
  <div class="audio-item" data-src="shengri_duxin.mp3" tabindex="0">ç”Ÿæ—¥è¯»ä¿¡</div>
  <div class="audio-item" data-src="women_haohui_zai_jian_men.mp3" tabindex="0">æˆ‘ä»¬è¿˜ä¼šå†è§é¢çš„</div>
  <div class="audio-item" data-src="jiejie_zaodian_shuijiao_ba.mp3" tabindex="0">å§å§æ—©ç‚¹ç¡è§‰å§</div>
  <div class="audio-item" data-src="xin_de_yinian_xiwang.mp3" tabindex="0">æ–°çš„ä¸€å¹´å¸Œæœ›æ˜å¹´è¦æ¯”ä»Šå¹´æ›´å¼€å¿ƒä¸€ç‚¹</div>
  <div class="audio-item" data-src="zaijianchi_yixia_rensheng_gaoguang.mp3" tabindex="0">å†åšæŒä¸€ä¸‹æˆ‘çš„äººç”Ÿé«˜å…‰å°±æ¥äº†</div>
  <div class="audio-item" data-src="mama_wanan.mp3" tabindex="0">å¦ˆå¦ˆæ™šå®‰</div>
</div>

<div id="sing" class="audio-list" role="tabpanel" tabindex="0" aria-labelledby="sing">
  <div class="audio-item" data-src="siyishenghua_live.mp3" tabindex="0">è‚†æ„ç”ŸèŠ±ç‰‡æ®µï¼ˆç›´æ’­ç‰ˆï¼‰</div>
  <div class="audio-item" data-src="tebie_de_ren.mp3" tabindex="0">ç‰¹åˆ«çš„äºº</div>
  <div class="audio-item" data-src="tuheisu.mp3" tabindex="0">è¤ªé»‘ç´ </div>
</div>

<div id="story" class="audio-list" role="tabpanel" tabindex="0" aria-labelledby="story">
  <div class="audio-item" data-src="xiaoshuimian.mp3" tabindex="0">å°ç¡çœ </div>
  <div class="audio-item" data-src="xiaoyu_youdao_dahaili_le_ma.mp3" tabindex="0">å°é±¼æ¸¸åˆ°å¤§æµ·é‡Œäº†å—</div>
</div>

<script>
  const tabs = document.querySelectorAll(".tab");
  const audioLists = document.querySelectorAll(".audio-list");
  const audio = new Audio();
  const nowPlaying = document.getElementById("nowPlaying");
  const playPauseBtn = document.getElementById("playPause");
  const prevBtn = document.getElementById("prev");
  const nextBtn = document.getElementById("next");
  const randomBtn = document.getElementById("random");
  const progress = document.getElementById("progress");
  const timeDisplay = document.getElementById("time");

  let currentIndex = -1;

  // åˆ‡æ¢æ¨¡å—Tab
  tabs.forEach((tab) => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => {
        t.classList.remove("active");
        t.setAttribute("aria-selected", "false");
        t.tabIndex = -1;
      });
      tab.classList.add("active");
      tab.setAttribute("aria-selected", "true");
      tab.tabIndex = 0;

      audioLists.forEach(list => {
        list.classList.remove("active");
        list.hidden = true;
      });
      const target = document.getElementById(tab.dataset.tab);
      target.classList.add("active");
      target.hidden = false;

      currentIndex = -1;
      audio.pause();
      audio.src = "";
      nowPlaying.textContent = "æœªæ’­æ”¾";
      progress.value = 0;
      timeDisplay.textContent = "00:00 / 00:00";

      clearActiveItems();
    });

    tab.addEventListener("keydown", (e) => {
      if (e.key === "ArrowRight") {
        e.preventDefault();
        const next = e.target.nextElementSibling || tabs[0];
        next.focus();
      } else if (e.key === "ArrowLeft") {
        e.preventDefault();
        const prev = e.target.previousElementSibling || tabs[tabs.length - 1];
        prev.focus();
      }
    });
  });

  // æ¸…é™¤é€‰ä¸­é«˜äº®
  function clearActiveItems() {
    document.querySelectorAll(".audio-item.active").forEach(item => {
      item.classList.remove("active");
    });
  }

  // å½“å‰æ¨¡å—éŸ³é¢‘åˆ—è¡¨
  function getCurrentListItems() {
    return document.querySelectorAll(".audio-list.active .audio-item");
  }

  // æ’­æ”¾æŒ‡å®šç´¢å¼•çš„éŸ³é¢‘
  function playAudio(index) {
    const items = getCurrentListItems();
    if (items.length === 0) return;
    if (index < 0) index = items.length - 1;
    if (index >= items.length) index = 0;
    currentIndex = index;
    const item = items[currentIndex];
    const src = item.dataset.src.trim();
    audio.src = src;
    audio.play();
    clearActiveItems();
    item.classList.add("active");
    nowPlaying.textContent = item.textContent;
    playPauseBtn.textContent = "â¸ï¸";
    playPauseBtn.setAttribute("aria-label", "æš‚åœ");
  }

  // ç‚¹å‡»éŸ³é¢‘é¡¹æ’­æ”¾
  function bindAudioItems() {
    getCurrentListItems().forEach((item, i) => {
      item.addEventListener("click", () => playAudio(i));
      item.addEventListener("keydown", e => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          e.target.click();
        }
      });
    });
  }

  // æ’­æ”¾/æš‚åœæŒ‰é’®
  playPauseBtn.addEventListener("click", () => {
    if (audio.paused) {
      audio.play();
      playPauseBtn.textContent = "â¸ï¸";
      playPauseBtn.setAttribute("aria-label", "æš‚åœ");
    } else {
      audio.pause();
      playPauseBtn.textContent = "â–¶ï¸";
      playPauseBtn.setAttribute("aria-label", "æ’­æ”¾");
    }
  });

  // ä¸Šä¸€é¦–
  prevBtn.addEventListener("click", () => {
    playAudio(currentIndex - 1);
  });

  // ä¸‹ä¸€é¦–
  nextBtn.addEventListener("click", () => {
    playAudio(currentIndex + 1);
  });

  // éšæœºæ’­æ”¾
  randomBtn.addEventListener("click", () => {
    const items = getCurrentListItems();
    if (items.length === 0) return;
    const randomIndex = Math.floor(Math.random() * items.length);
    playAudio(randomIndex);
  });

  // éŸ³é¢‘è¿›åº¦æ›´æ–°
  audio.addEventListener("timeupdate", () => {
    if (audio.duration) {
      const percent = (audio.currentTime / audio.duration) * 100;
      progress.value = percent;
      timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
    }
  });

  // è¿›åº¦æ¡æ‹–åŠ¨æ§åˆ¶éŸ³é¢‘è¿›åº¦
  progress.addEventListener("input", () => {
    if (audio.duration) {
      const seekTime = (progress.value / 100) * audio.duration;
      audio.currentTime = seekTime;
    }
  });

  // éŸ³é¢‘æ’­æ”¾å®Œè‡ªåŠ¨ä¸‹ä¸€é¦–
  audio.addEventListener("ended", () => {
    playAudio(currentIndex + 1);
  });

  // æ ¼å¼åŒ–æ—¶é—´ä¸º mm:ss
  function formatTime(seconds) {
    const m = Math.floor(seconds / 60).toString().padStart(2, "0");
    const s = Math.floor(seconds % 60).toString().padStart(2, "0");
    return `${m}:${s}`;
  }

  // åˆå§‹åŒ–ç»‘å®šäº‹ä»¶
  bindAudioItems();

  // è§¦æ‘¸æ»‘åŠ¨åˆ‡æ¢Tabæ”¯æŒ
  let startX = 0;
  let endX = 0;
  const tabContainer = document.getElementById('tabs');

  tabContainer.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
  });
  tabContainer.addEventListener('touchmove', e => {
    endX = e.touches[0].clientX;
  });
  tabContainer.addEventListener('touchend', e => {
    const diff = endX - startX;
    if (Math.abs(diff) > 50) {
      let activeIndex = [...tabs].findIndex(t => t.classList.contains('active'));
      if (diff > 0) {
        activeIndex = (activeIndex - 1 + tabs.length) % tabs.length;
      } else {
        activeIndex = (activeIndex + 1) % tabs.length;
      }
      tabs[activeIndex].click();
      tabs[activeIndex].focus();
      bindAudioItems(); // æ›´æ–°æ–°tabéŸ³é¢‘äº‹ä»¶ç»‘å®š
    }
  });

  // æ¯æ¬¡åˆ‡æ¢tabæ—¶ï¼Œé‡æ–°ç»‘å®šéŸ³é¢‘ç‚¹å‡»äº‹ä»¶
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      bindAudioItems();
    });
  });

</script>
</body>
</html>
